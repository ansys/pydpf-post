
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/01-Detailed-Examples/05-mesh-exploration.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_01-Detailed-Examples_05-mesh-exploration.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_01-Detailed-Examples_05-mesh-exploration.py:


.. _ref_mesh_exploration_example:

Explore and manipulate the mesh
===============================
This example shows how to explore and manipulate the mesh to query mesh data
such as connectivity tables, element IDs, and element types.

.. note::
    This example requires DPF 3.0 (2022 R1) or above.
    For more information, see :ref:`compatibility`.

.. GENERATED FROM PYTHON SOURCE LINES 38-42

Perform required imports
------------------------
Perform required imports. This example uses a supplied file that you can
get by importing the DPF ``examples`` package.

.. GENERATED FROM PYTHON SOURCE LINES 42-47

.. code-block:: Python


    from ansys.dpf import post
    from ansys.dpf.post import examples
    from ansys.dpf.post.common import elemental_properties








.. GENERATED FROM PYTHON SOURCE LINES 48-54

Load result file
----------------
Load the result file in a ``Simulation`` object that allows access to the results.
The ``Simulation`` object must be instantiated with the path for the result file.
For example, ``"C:/Users/user/my_result.rst"`` on Windows
or ``"/home/user/my_result.rst"`` on Linux.

.. GENERATED FROM PYTHON SOURCE LINES 54-58

.. code-block:: Python


    example_path = examples.download_harmonic_clamped_pipe()
    simulation = post.HarmonicMechanicalSimulation(example_path)








.. GENERATED FROM PYTHON SOURCE LINES 59-61

Get mesh and print it
---------------------

.. GENERATED FROM PYTHON SOURCE LINES 61-64

.. code-block:: Python

    mesh = simulation.mesh
    print(mesh)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    DPF  Mesh: 
      9943 nodes 
      5732 elements 
      Unit: mm 
      With solid (3D) elements, shell (2D) elements, shell (3D) elements




.. GENERATED FROM PYTHON SOURCE LINES 65-68

Plot mesh
-------------
Plot the mesh to view the bare mesh of the model.

.. GENERATED FROM PYTHON SOURCE LINES 68-70

.. code-block:: Python

    mesh.plot()




.. image-sg:: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_001.png
   :alt: 05 mesh exploration
   :srcset: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_001.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    (None, <pyvista.plotting.plotter.Plotter object at 0x7fbd14a7b250>)



.. GENERATED FROM PYTHON SOURCE LINES 71-74

Get basic information about mesh
--------------------------------
The ``Mesh`` object has several properties allowing access to different information.

.. GENERATED FROM PYTHON SOURCE LINES 76-77

Get the number of nodes.

.. GENERATED FROM PYTHON SOURCE LINES 77-79

.. code-block:: Python

    print(f"This mesh contains {mesh.num_nodes} nodes")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    This mesh contains 9943 nodes




.. GENERATED FROM PYTHON SOURCE LINES 80-81

Get the list of node IDs.

.. GENERATED FROM PYTHON SOURCE LINES 81-83

.. code-block:: Python

    print(f"with IDs: {mesh.node_ids}")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    with IDs: [   1    2    3 ... 9941 9942 9943]




.. GENERATED FROM PYTHON SOURCE LINES 84-85

Get the number of elements.

.. GENERATED FROM PYTHON SOURCE LINES 85-87

.. code-block:: Python

    print(f"This mesh contains {mesh.num_elements} elements")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    This mesh contains 5732 elements




.. GENERATED FROM PYTHON SOURCE LINES 88-89

Get the list of element IDs.

.. GENERATED FROM PYTHON SOURCE LINES 89-91

.. code-block:: Python

    print(f"with IDs {mesh.element_ids}")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    with IDs [3487 3960 1449 ... 8438 8437 8540]




.. GENERATED FROM PYTHON SOURCE LINES 92-93

Get the unit of the mesh.

.. GENERATED FROM PYTHON SOURCE LINES 93-95

.. code-block:: Python

    print(f"The mesh is in '{mesh.unit}'")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    The mesh is in 'mm'




.. GENERATED FROM PYTHON SOURCE LINES 96-102

Get named selections
--------------------
The available named selections are given as a dictionary
with the names as keys and the actual ``NamedSelection`` objects as values.

Print the dictionary to get the available names.

.. GENERATED FROM PYTHON SOURCE LINES 102-105

.. code-block:: Python

    named_selections = mesh.named_selections
    print(named_selections)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    NamedSelections dictionary with 4 named selections:
            - 'CLAMP'
            - 'PIPE'
            - 'SCREW'
            - '_FIXEDSU'




.. GENERATED FROM PYTHON SOURCE LINES 106-107

Get a specific named selection by using its name as the key.

.. GENERATED FROM PYTHON SOURCE LINES 107-109

.. code-block:: Python

    print(named_selections["_FIXEDSU"])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    NamedSelection '_FIXEDSU'
     with DPF  Scoping: 
      with Nodal location and 161 entities





.. GENERATED FROM PYTHON SOURCE LINES 110-113

Get elements
--------
Get a list of the elements.

.. GENERATED FROM PYTHON SOURCE LINES 113-115

.. code-block:: Python

    print(mesh.elements)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [tet10, ..., point1]




.. GENERATED FROM PYTHON SOURCE LINES 116-117

Get a specific element by its ID.

.. GENERATED FROM PYTHON SOURCE LINES 117-119

.. code-block:: Python

    print(mesh.elements.by_id[1])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    DPF Element 1
            Index:         4239
            Nodes:           20
            Type:         Hex20
            Shape:        Solid





.. GENERATED FROM PYTHON SOURCE LINES 120-121

Get a specific element by its index.

.. GENERATED FROM PYTHON SOURCE LINES 121-124

.. code-block:: Python

    element_0 = mesh.elements[0]
    print(element_0)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    DPF Element 3487
            Index:            0
            Nodes:           10
            Type:         Tet10
            Shape:        Solid





.. GENERATED FROM PYTHON SOURCE LINES 125-128

Get information about a particular element
------------------------------------------
You can request the IDs of the nodes attached to an element.

.. GENERATED FROM PYTHON SOURCE LINES 128-130

.. code-block:: Python

    print(element_0.node_ids)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [3548, 3656, 4099, 3760, 6082, 6650, 6086, 6085, 6647, 7147]




.. GENERATED FROM PYTHON SOURCE LINES 131-132

Get the list of the element's nodes.

.. GENERATED FROM PYTHON SOURCE LINES 132-134

.. code-block:: Python

    print(element_0.nodes)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [<ansys.dpf.core.nodes.Node object at 0x7fbd14a790f0>, <ansys.dpf.core.nodes.Node object at 0x7fbd14a7bf10>, <ansys.dpf.core.nodes.Node object at 0x7fbd14a78e20>, <ansys.dpf.core.nodes.Node object at 0x7fbd14a78730>, <ansys.dpf.core.nodes.Node object at 0x7fbd14a7b850>, <ansys.dpf.core.nodes.Node object at 0x7fbd1f544250>, <ansys.dpf.core.nodes.Node object at 0x7fbd1f544880>, <ansys.dpf.core.nodes.Node object at 0x7fbd1f5453c0>, <ansys.dpf.core.nodes.Node object at 0x7fbd1f545180>, <ansys.dpf.core.nodes.Node object at 0x7fbd1f544a00>]




.. GENERATED FROM PYTHON SOURCE LINES 135-136

Get the number of nodes attached to the element.

.. GENERATED FROM PYTHON SOURCE LINES 136-138

.. code-block:: Python

    print(element_0.num_nodes)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    10




.. GENERATED FROM PYTHON SOURCE LINES 139-140

Get the type of the element.

.. GENERATED FROM PYTHON SOURCE LINES 140-143

.. code-block:: Python

    print(element_0.type_info)
    print(element_0.type)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Element Type
    ------------
    Enum id (dpf.element_types): element_types.Tet10
    Element description: Quadratic 10-nodes Tetrahedron
    Element name (short): tet10
    Element shape: solid
    Number of corner nodes: 4
    Number of mid-side nodes: 6
    Total number of nodes: 10
    Quadratic element: True
    element_types.Tet10




.. GENERATED FROM PYTHON SOURCE LINES 144-145

Get the shape of the element.

.. GENERATED FROM PYTHON SOURCE LINES 145-147

.. code-block:: Python

    print(element_0.shape)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    solid




.. GENERATED FROM PYTHON SOURCE LINES 148-152

Get element types and materials
-------------------------------
The ``Mesh`` object provides access to properties defined on all elements,
such as their types or associated materials.

.. GENERATED FROM PYTHON SOURCE LINES 154-155

Get the type of all elements.

.. GENERATED FROM PYTHON SOURCE LINES 155-157

.. code-block:: Python

    print(mesh.element_types)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


         results elem_type_id
     element_ids             
            3487            0
            3960            0
            1449            0
            3131            0
            3124            0
            3126            0
             ...          ...





.. GENERATED FROM PYTHON SOURCE LINES 158-159

Get the materials of all elements.

.. GENERATED FROM PYTHON SOURCE LINES 159-161

.. code-block:: Python

    print(mesh.materials)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


         results material_id
     element_ids            
            3487           1
            3960           1
            1449           1
            3131           1
            3124           1
            3126           1
             ...         ...





.. GENERATED FROM PYTHON SOURCE LINES 162-165

Get elemental connectivity
--------------------------
The elemental connectivity maps elements to connected nodes using either IDs or indexes.

.. GENERATED FROM PYTHON SOURCE LINES 167-168

Access the indexes of the connected nodes using an element's index:

.. GENERATED FROM PYTHON SOURCE LINES 168-171

.. code-block:: Python

    element_to_node_connectivity = mesh.element_to_node_connectivity
    print(element_to_node_connectivity[0])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [3547, 3655, 4098, 3759, 6081, 6649, 6085, 6084, 6646, 7146]




.. GENERATED FROM PYTHON SOURCE LINES 172-173

Access the IDs of the connected nodes using an element's index:

.. GENERATED FROM PYTHON SOURCE LINES 173-176

.. code-block:: Python

    element_to_node_ids_connectivity = mesh.element_to_node_ids_connectivity
    print(element_to_node_ids_connectivity[0])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [3548, 3656, 4099, 3760, 6082, 6650, 6086, 6085, 6647, 7147]




.. GENERATED FROM PYTHON SOURCE LINES 177-178

Each connectivity object has a ``by_id`` property that changes the input from index to ID.

.. GENERATED FROM PYTHON SOURCE LINES 180-181

Access the indexes of the connected nodes using an element's ID.

.. GENERATED FROM PYTHON SOURCE LINES 181-184

.. code-block:: Python

    element_to_node_connectivity_by_id = mesh.element_to_node_connectivity.by_id
    print(element_to_node_connectivity_by_id[3487])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [3547, 3655, 4098, 3759, 6081, 6649, 6085, 6084, 6646, 7146]




.. GENERATED FROM PYTHON SOURCE LINES 185-186

Access the IDs of the connected nodes using an element's ID:

.. GENERATED FROM PYTHON SOURCE LINES 186-189

.. code-block:: Python

    element_to_node_ids_connectivity_by_id = mesh.element_to_node_ids_connectivity.by_id
    print(element_to_node_ids_connectivity_by_id[3487])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [3548, 3656, 4099, 3760, 6082, 6650, 6086, 6085, 6647, 7147]




.. GENERATED FROM PYTHON SOURCE LINES 190-193

Get a node or node information
------------------------------
Get a node by its ID.

.. GENERATED FROM PYTHON SOURCE LINES 193-196

.. code-block:: Python

    node_1 = mesh.nodes.by_id[1]
    print(node_1)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Node(id=1, coordinates=[44.90718016, 12.57776697, 53.33333333])




.. GENERATED FROM PYTHON SOURCE LINES 197-198

Get a node by its index.

.. GENERATED FROM PYTHON SOURCE LINES 198-200

.. code-block:: Python

    print(mesh.nodes[0])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Node(id=1, coordinates=[44.90718016, 12.57776697, 53.33333333])




.. GENERATED FROM PYTHON SOURCE LINES 201-202

Get the coordinates of all nodes.

.. GENERATED FROM PYTHON SOURCE LINES 202-204

.. code-block:: Python

    print(mesh.coordinates)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


                 results  coord (m)
     node_ids components           
            1          X 4.4907e+01
                       Y 1.2578e+01
                       Z 5.3333e+01
            2          X 4.4907e+01
                       Y 1.2578e+01
                       Z 5.1667e+01
          ...        ...        ...





.. GENERATED FROM PYTHON SOURCE LINES 205-206

Get the coordinates of a particular node.

.. GENERATED FROM PYTHON SOURCE LINES 206-208

.. code-block:: Python

    print(node_1.coordinates)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [44.90718016, 12.57776697, 53.33333333]




.. GENERATED FROM PYTHON SOURCE LINES 209-212

Get nodal connectivity
----------------------
The nodal connectivity maps nodes to connected elements, either using IDs or indexes.

.. GENERATED FROM PYTHON SOURCE LINES 214-215

Access the indexes of the connected elements using a node's index.

.. GENERATED FROM PYTHON SOURCE LINES 215-218

.. code-block:: Python

    node_to_element_connectivity = mesh.node_to_element_connectivity
    print(node_to_element_connectivity[0])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [4216, 4218, 4219, 4242, 4244, 4245]




.. GENERATED FROM PYTHON SOURCE LINES 219-220

Access the IDs of the connected elements using a node's index.

.. GENERATED FROM PYTHON SOURCE LINES 220-223

.. code-block:: Python

    node_to_element_ids_connectivity = mesh.node_to_element_ids_connectivity
    print(node_to_element_ids_connectivity[0])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [11, 8, 14, 10, 7, 13]




.. GENERATED FROM PYTHON SOURCE LINES 224-225

Each connectivity object has a ``by_id`` property that changes the input from index to ID.

.. GENERATED FROM PYTHON SOURCE LINES 227-228

Access the indexes of the connected elements using a node's ID.

.. GENERATED FROM PYTHON SOURCE LINES 228-231

.. code-block:: Python

    node_to_element_connectivity_by_id = mesh.node_to_element_connectivity.by_id
    print(node_to_element_connectivity_by_id[1])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [4216, 4218, 4219, 4242, 4244, 4245]




.. GENERATED FROM PYTHON SOURCE LINES 232-233

Access the IDs of the connected elements using a node's ID.

.. GENERATED FROM PYTHON SOURCE LINES 233-236

.. code-block:: Python

    node_to_element_ids_connectivity_by_id = mesh.node_to_element_ids_connectivity.by_id
    print(node_to_element_ids_connectivity_by_id[1])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    [11, 8, 14, 10, 7, 13]




.. GENERATED FROM PYTHON SOURCE LINES 237-240

Split global mesh into mesh parts
---------------------------------
You can split the global mesh according to mesh properties to work on specific parts of the mesh.

.. GENERATED FROM PYTHON SOURCE LINES 240-243

.. code-block:: Python

    meshes = simulation.split_mesh_by_properties(
        properties=[elemental_properties.material, elemental_properties.element_shape]
    )







.. GENERATED FROM PYTHON SOURCE LINES 244-245

A ``Meshes`` object obtained.

.. GENERATED FROM PYTHON SOURCE LINES 245-247

.. code-block:: Python

    print(meshes)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    DPF  Meshes Container
      with 14 mesh(es)
      defined on labels: elshape mat 

      with:
      - mesh 0 {mat:  1, elshape:  1, } with 6673 nodes and 3517 elements.
      - mesh 1 {mat:  9, elshape:  0, } with 189 nodes and 55 elements.
      - mesh 2 {mat:  10, elshape:  0, } with 189 nodes and 55 elements.
      - mesh 3 {mat:  5, elshape:  0, } with 842 nodes and 319 elements.
      - mesh 4 {mat:  6, elshape:  0, } with 842 nodes and 319 elements.
      - mesh 5 {mat:  7, elshape:  0, } with 676 nodes and 306 elements.
      - mesh 6 {mat:  4, elshape:  1, } with 503 nodes and 72 elements.
      - mesh 7 {mat:  8, elshape:  0, } with 676 nodes and 306 elements.
      - mesh 8 {mat:  2, elshape:  1, } with 2107 nodes and 345 elements.
      - mesh 9 {mat:  3, elshape:  1, } with 658 nodes and 302 elements.
      - mesh 10 {mat:  11, elshape:  0, } with 176 nodes and 56 elements.
      - mesh 11 {mat:  16, elshape:  0, } with 97 nodes and 23 elements.
      - mesh 12 {mat:  12, elshape:  0, } with 176 nodes and 56 elements.
      - mesh 13 {mat:  16, elshape:  3, } with 1 nodes and 1 elements.





.. GENERATED FROM PYTHON SOURCE LINES 248-249

Plot a ``Meshes`` object to plot a combination of all ``Mesh`` objects within the split mesh.

.. GENERATED FROM PYTHON SOURCE LINES 249-251

.. code-block:: Python

    meshes.plot(text="Mesh split")




.. image-sg:: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_002.png
   :alt: 05 mesh exploration
   :srcset: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_002.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    (None, <pyvista.plotting.plotter.Plotter object at 0x7fbd1f5459c0>)



.. GENERATED FROM PYTHON SOURCE LINES 252-253

Select a specific ``Mesh``object in the split mesh by index.

.. GENERATED FROM PYTHON SOURCE LINES 253-255

.. code-block:: Python

    meshes[0].plot(text="First mesh in the split mesh")




.. image-sg:: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_003.png
   :alt: 05 mesh exploration
   :srcset: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_003.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    (None, <pyvista.plotting.plotter.Plotter object at 0x7fbcf495e380>)



.. GENERATED FROM PYTHON SOURCE LINES 256-257

Split the global mesh and select meshes based on specific property values.

.. GENERATED FROM PYTHON SOURCE LINES 257-265

.. code-block:: Python

    meshes_filtered = simulation.split_mesh_by_properties(
        properties={
            elemental_properties.material: [2, 3, 4],
            elemental_properties.element_shape: 1,
        }
    )
    meshes_filtered.plot(text="Mesh split and filtered")




.. image-sg:: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_004.png
   :alt: 05 mesh exploration
   :srcset: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_004.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    (None, <pyvista.plotting.plotter.Plotter object at 0x7fbd1f544bb0>)



.. GENERATED FROM PYTHON SOURCE LINES 266-267

Select a ``mesh`` object with a unique combination of property values.

.. GENERATED FROM PYTHON SOURCE LINES 267-268

.. code-block:: Python

    meshes[{"mat": 5, "elshape": 0}].plot(text="Mesh for mat=5 and elshape=0")



.. image-sg:: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_005.png
   :alt: 05 mesh exploration
   :srcset: /examples/01-Detailed-Examples/images/sphx_glr_05-mesh-exploration_005.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    (None, <pyvista.plotting.plotter.Plotter object at 0x7fbcf495d0f0>)




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 49.345 seconds)


.. _sphx_glr_download_examples_01-Detailed-Examples_05-mesh-exploration.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 05-mesh-exploration.ipynb <05-mesh-exploration.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 05-mesh-exploration.py <05-mesh-exploration.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: 05-mesh-exploration.zip <05-mesh-exploration.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
